$(function () {
    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });

    $('#filters input:checkbox').on('click', function () {
        var raceOpts = getFilterOptions('race');
        var hairOpts = getFilterOptions('hair');
        var eyeOpts = getFilterOptions('eyes');

        $.ajax({
            url: 'profiles/filter',
            type: 'post',
            data: {
                race: raceOpts,
                hair: hairOpts,
                eye: eyeOpts
            },
            dataType: "json",
            success: function (response) {
                console.log(response);
            },
            error: function (response) {

            },
            complete: function () {
            }
        });

    });
});

function getFilterOptions(filterBy = 'race') {
    var opts = [];
    var checkboxes = $('#' + filterBy + ' input:checkbox');
    checkboxes.each(function () {
        if (this.checked) {
            opts.push(this.value);
        }
    });
    return opts;
}
