$(function () {
    //region Global Stuff
    var $taskEditModal = $('#edit-note-modal');
    var $messageModal = $('#message-modal');
    var $taskModal = $('#new-note-modal');
    //endregion

    //region Edit Task btn click
    $body.on('click', '.js-btn-edit', function (evt) {
        evt.preventDefault();

        $tr = $(this).closest('tr');

        var task = $tr.find('.task').text();
        var type = $tr.find('.type').text();
        var startedOn = $tr.find('.start-date').text();
        var dueDate = $tr.find('.due-date').text();

        $taskEditModal.find('[name=task]').val(task);
        $taskEditModal.find('[name=type]').val(type);
        $taskEditModal.find('[name=start_date]').val(startedOn);
        $taskEditModal.find('[name=due_date]').val(dueDate);


        $taskEditModal.modal('show');

        //add focus to non empty fields
        addFocusOnOpenModal($taskEditModal);
    });
    //endregion


    $('.js-btn-new-task').click(function (evt) {
        evt.preventDefault();

        $taskModal.modal('show');

        //add focus to non empty fields
        addFocusOnOpenModal($taskModal);
    });


    $('#new-note-form').validate({
        rules: {
            type: {
                required: true,
                minlength: 2
            },
            note: {
                required: true,
            }
        },
        messages: {
            type: {
                required: "Please enter a type",
            },
            note: {
                required: "Please enter the note",
            },
        },
    });
});

//endregion
