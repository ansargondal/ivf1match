$(function () {
    $('body').on('click', '.dropdown .dropdown-menu a', function () {

        var status = $.trim($(this).text());

        var btn = $(this).closest('.dropdown').find('.btn');

        btn.text(status).removeClass('btn-primary btn-success btn-info btn-warning btn-secondary');

        switch (status.toLowerCase()) {
            case 'new':
                btn.addClass('btn-info');
                break;
            case 'available':
                btn.addClass('btn-success');
                break;
            case 'matched':
                btn.addClass('btn-primary');
                break;
            case 'in cycle':
                btn.addClass('btn-info');
                break;
            case 'just completed cycle':
                btn.addClass('btn-secondary');
                break;
            case 'inactive':
                btn.addClass('btn-warning');
                break;
            default:
                break;
        }

        notify('Donor cycle has been changed to ' + status + '!');
    });


    var table = $('#data-table').DataTable({

        buttons: ['copy', 'excel', 'pdf'],
        responsive: true,
        processing: true,
        serverSide: true,
        'ajax': "/admin/donorsAjax",
        'columns': [
            {'data': 'code', name: 'code'},
            {'data': 'fname', name: 'fname'},
            {'data': 'lname', name: 'lname'},
            {'data': 'lname', name: 'lname'},
            {'data': 'cycle', name: 'cycle'},
            {'data': 'status', name: 'status'},
            {'data': 'action', name: 'action'},
        ],
        "language": {
            processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only"></span>',
            paginate: {
                'previous': '<i class="fa fa-angle-double-left"></i>',
                'next': '<i class="fa fa-angle-double-right"></i>'
            }
        },
    });

});